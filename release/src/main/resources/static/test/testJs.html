<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../css/bootstrap-3.3.6-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/bootstrap-3.3.6-dist/css/bootstrap-theme.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="fileBrowser.css" rel="stylesheet">

    <script src="../otherJS/jquery.min.js"></script>
    <script src="../css/bootstrap-3.3.6-dist/js/bootstrap.min.js"></script>

    <script src="../angular.js"></script>
    <script src="../otherJS/ag-grid-dist/ag-grid.js"></script>
    <script src="../otherJS/ag-grid-enterprise-dist/ag-grid-enterprise.js"></script>
    <script>
        var columnDefs = [
            {headerName: "Group", cellRenderer: 'group'},
            {headerName: "Athlete", field: "athlete"},
            {headerName: "Year", field: "year"},
            {headerName: "Country", field: "country"}
        ];

        var rowData = [
            {
                group: 'Group A',
                title: '102',
                participants: [
                    {
                        group: 'G1',
                        title:'海鲜',
                        participants: [
                            {athlete: 'Michael Phelps', year: '2008', country: 'United States'},
                            {athlete: 'Michael Phelps', year: '2008', country: 'United States'},
                            {athlete: 'Michael Phelps', year: '2008', country: 'United States'}
                            ]
                    },
                    {
                        group: 'G2',
                        title:'酒水',
                        participants: [
                            {athlete: 'Michael Phelps', year: '2008', country: 'United States'},
                            {athlete: 'Michael Phelps', year: '2008', country: 'United States'},
                            {athlete: 'Michael Phelps', year: '2008', country: 'United States'}
                        ]
                    }
                ]
            },
            {
                group: 'Group B', athlete: 'Sausage', year: 'Spaceman', country: 'Winklepicker',
                title: '103',
                participants: [
                    {athlete: 'Natalie Coughlin', year: '2008', country: 'United States'},
                    {athlete: 'Missy Franklin ', year: '2012', country: 'United States'},
                    {athlete: 'Ole Einar Qjorndalen', year: '2002', country: 'Norway'},
                    {athlete: 'Marit Bjorgen', year: '2010', country: 'Norway'},
                    {athlete: 'Ian Thorpe', year: '2000', country: 'Australia'}
                ]
            },
            {
                group: 'Group C',
                title: '104',
                participants: [
                    {athlete: 'Janica Kostelic', year: '2002', country: 'Crotia'},
                    {athlete: 'An Hyeon-Su', year: '2006', country: 'South Korea'}
                ]
            }
        ];

        var gridOptions = {
            columnDefs: columnDefs,
            rowData: rowData,
            debug: true,
            getNodeChildDetails: getNodeChildDetails,
            onGridReady: function (params) {
                params.api.sizeColumnsToFit();
            }
        };

        function getNodeChildDetails(rowItem) {
            if (rowItem.group) {
                return {
                    group: true,
                    // open C be default
                    expanded: rowItem.group === 'Group C',
                    // provide ag-Grid with the children of this group
                    children: rowItem.participants,
                    // this is not used, however it is available to the cellRenderers,
                    // if you provide a custom cellRenderer, you might use it. it's more
                    // relavent if you are doing multi levels of groupings, not just one
                    // as in this example.
                    field: 'group',
                    // the key is used by the default group cellRenderer
                    key: rowItem.group
                };
            } else {
                return null;
            }
        }

        function onFilterChanged(value) {
            gridOptions.api.setQuickFilter(value);
        }
        function expandAll() {
            gridOptions.api.expandAll();
        }

        // setup the grid after the page has finished loading
        document.addEventListener('DOMContentLoaded', function () {
            var gridDiv = document.querySelector('#myGrid');
            new agGrid.Grid(gridDiv, gridOptions);
        });
    </script>
</head>
<body>
<button onclick="expandAll()"></button>
<div id="myGrid" class="ag-fresh" style="height: 450px; margin-top: 4px;"></div>
</body>
</html>