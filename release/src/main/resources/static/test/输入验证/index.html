<!DOCTYPE html>
<html ng-app="app">
<head>
    <meta charset="utf-8">
    <script src="../../angular.js"></script>
    <script src="../../angular-ui-1.3.2.js"></script>
    <script>
        angular.module('app', [])
                .controller('validateCtrl', function ($scope) {
                    $scope.user = 'John Doe';
                    $scope.email = 'john.doe@gmail.com';
                })
                .directive('szValidation', function ($compile) {
                    return {
                        restrict: 'A',
                        link: function (scope, element, attr) {
                            var el = $compile('<span style="color:red" ng-show=' + attr.szValidation + '.' + attr.name + '.$dirty && ' + attr.szValidation + '.' + attr.name + '.$invalid"><span ng-show="' + attr.szValidation + '.' + attr.name + '.$error.required">用户名是必须的。</span> </span>')(scope);
                            element.after(el);
                        }
                    }
                })
    </script>
</head>
<body ng-controller="validateCtrl">
<input name="email" ng-model="email"
       ui-validate="{blacklist : 'notBlackListed($value)' }"> Is e-mail black-listed? false
ui-validate-async="{alreadyExists: 'doesNotExist($modelValue)' }"> Is e-mail already registered? false
<input name="password" required ng-model="password"> <input name="confirm_password"
                                                            ui-validate=" '$value==password' "
                                                            ui-validate-watch=" 'password' "> Passwords match? true ...
$scope.notBlackListed = function(value) { var blacklist = ['bad@domain.com','verybad@domain.com']; return
blacklist.indexOf(value)
=== -1; }

<h2>验证实例</h2>
<form name="myForm">

    <p>用户名:<br>
        <input type="text" name="user" ng-model="user" required sz-validation="myForm">
    </p>

    <p>邮箱:<br>
        <input type="email" name="email" ng-model="email" required>
<span style="color:red" ng-show="myForm.email.$dirty && myForm.email.$invalid">
<span ng-show="myForm.email.$error.required">邮箱是必须的。</span>
<span ng-show="myForm.email.$error.email">非法的邮箱地址。</span>
</span>
    </p>

    <p>
        <input type="submit"
               ng-disabled="myForm.user.$dirty && myForm.user.$invalid ||
myForm.email.$dirty && myForm.email.$invalid">
    </p>

</form>

</body>
</html>
